import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';
import { Router } from '@angular/router';
import * as d3 from 'd3';
declare var Plotly: any;
import { GeneralServiceService } from '../general-service.service';
interface MyNodeData {
  name: string;
  children?: MyNodeData[];
}


import {
  ChartComponent,
  ApexAxisChartSeries,
  ApexChart,
  ApexXAxis,
  ApexYAxis,
  ApexDataLabels,
  ApexTitleSubtitle,
  ApexStroke,
  ApexGrid,
  ApexTooltip
} from "ng-apexcharts";

export type ChartOptions = {
  series: ApexAxisChartSeries;
  chart: ApexChart 
  xaxis: ApexXAxis;
  yaxis: ApexYAxis;
  dataLabels: ApexDataLabels;
  grid: ApexGrid;
  stroke: ApexStroke;
  title: ApexTitleSubtitle;
  tooltip: ApexTooltip
};


export type ChartOptions1 = {
  series: ApexAxisChartSeries;
  chart: ApexChart;
  xaxis: ApexXAxis;
  yaxis: ApexYAxis;
  dataLabels: ApexDataLabels;
  grid: ApexGrid;
  stroke: ApexStroke;
  title: ApexTitleSubtitle;
  tooltip: ApexTooltip
};

@Component({
  selector: 'app-algorithm-selection',
  templateUrl: './algorithm-selection.component.html',
  styleUrls: ['./algorithm-selection.component.css'],
})
export class AlgorithmSelectionComponent implements OnInit {
  @ViewChild('content', {static:false})el!:ElementRef;
 display:boolean = false;
 @ViewChild("chart") chart: ChartComponent;
 public chartOptions: Partial<ChartOptions>;

 @ViewChild("chart1") chart1: ChartComponent;
 public chartOptions1: Partial<ChartOptions1>;
  constructor(private router: Router, private gs: GeneralServiceService) { }
 
  ngOnInit(): void {
    
    this.elbow()
    this.eps()
    this.createDendrogram();
  }
 
  rowData1: any = {};
  rowData2: any = {}; 
  rowData3: any = {}; 
  isDendrogramVisible = false;
  panelOpenState = false;
  selectedAlgorithm: string = null;

  selectedInitMethod: string;
  selectedClusterRange: string;
  selectedIterations: string;

  selectedAlgorithm1: string = null;
  selectedClusteringMethod1: string;
  selectedClusterMetric: string;

  selectedAlgorithm2: string = null;
  selectedParam: string;
  imageSource: string;

  clickbutton:boolean=false;
  clickbuttonDB:boolean=false;
  clickbuttonDendro:boolean=false;
  isOptionSelectedA1 = false;
  isOptionSelectedA2 = false;
  isOptionSelectedA3 = false;

  epsValue: string;
minSamples: string;
clusterAg:string;
clusterKm:string;
  onSelectAlgorithm() {
    if (this.selectedAlgorithm !== '') {
      this.isOptionSelectedA1 = true;
      
    } else {
      this.isOptionSelectedA1 = false;
     
    }
  }

  onSelectAlgorithm1(){
    if (this.selectedAlgorithm1 !== '') {
      
      this.isOptionSelectedA2 = true;
      
    } else {
      this.isOptionSelectedA2 = false;
      
    }
   
  }

  onSelectAlgorithm2(){
    if (this.selectedAlgorithm2 !== '') {
      
      this.isOptionSelectedA3 = true;
      
    } else {
      this.isOptionSelectedA3 = false;
      
    }
   
  }
  iconClicked(event: Event): void {
    // Code to handle icon click goes here
    // You can choose to close the panel here if needed
  }

 

  runButtonClicked(event: Event): void {
    event.stopPropagation();
    
    // Code to handle "Run" button click goes here
    // The panel will not close due to event.stopPropagation()
  }
  isLoadingKM = true;
  runButtonClicked1(event: Event): void {
    event.stopPropagation();
    this.clickbutton=true;
    setTimeout(() => {
      this.isLoadingKM = false;
    }, 3000); // 3 seconds delay
   
  }
  
  isLoading = true;
  runButtonClickedDB(event: Event): void {
    event.stopPropagation();
    this.clickbuttonDB=true;
    setTimeout(() => {
      this.isLoading = false;
    }, 3000); // 3 seconds delay
    // Code to handle "Run" button click goes here
    // The panel will not close due to event.stopPropagation()
  }

  isLoadingDendro = true;
  runButtonClickedDendro(event: Event): void {
    event.stopPropagation();
    this.clickbuttonDendro=true;
    setTimeout(() => {
      this.isLoadingDendro = false;
    }, 3000); // 3 seconds delay
    this.clickbuttonDendro=true;
    if (this.selectedClusteringMethod1 === 'option1') {
      this.imageSource = '../../assets/images/d3.png';
    } else if (this.selectedClusteringMethod1 === 'option2') {
      this.imageSource = '../../assets/images/d2.png';
    } else if (this.selectedClusteringMethod1 === 'option3') {
      this.imageSource = '../../assets/images/d1.png';
    } else {
      this.imageSource = ''; // Set a default image source if needed
    }
    
  }
  
  showContent() 
  { 
    this.display= true
    this.isDendrogramVisible = !this.isDendrogramVisible
    console.log('K Means:', this.rowData1); 
    console.log('Agglomerative Hierarchical:', this.rowData2); 
    console.log('DB Scan:', this.rowData3);
  } 
  isLoading1 = false;
  gotoClusterAnalysis(){
    this.captureScreen()
    this.isLoading1 = true;
    setTimeout(() => {
      this.router.navigate(['./analysis']).then(() => {
        this.isLoading1 = false;
      });
    }, 3000); // Delay of 3 seconds
   
  }
  elbow() {
    const data = [
      30674.534666666645,
      28309.865098039187,
      27405.672396878457,
      26744.13921377517,
      26131.58438923397,
      25594.224917522573,
      25196.415062845655,
      24854.62766654396,
      24313.93969095713,
      23732.66380730381,
      23548.26414021165,
      22949.607893217897
  ]
   
  
    this.chartOptions = {
      series: [
        {
          name: "",
          data: data
        }
      ],
      chart: {
        height: 190,
        width: 250,
        type: "line",
        zoom: {
          enabled: false
        }
      },
      dataLabels: {
        enabled: false
      },
      stroke: {
        curve: "straight"
      },
      title: {
        text: "Elbow Graph",
        align: "left",
        style: {
          color: '#222',
         fontSize:'14px',
         fontFamily:'Outfit',
         fontWeight:500,
        }
      },
      grid: {
        row: {
          colors: ["#f3f3f3", "transparent"],
          opacity: 0.5
        }
      },
      xaxis: {
        categories: [],
        title: {
          text: "Number of Clusters",
          style: {
            color: '#666',
           fontSize:'14px',
           fontFamily:'Outfit',
           fontWeight:200
          }
        },
        labels:{
          style: {
            fontSize:'10px',
            fontFamily:'Outfit',
            fontWeight:400
           },
        }
      },
      yaxis: {
        title: {
          text: "WCSS",
          style: {
            color: '#666',
           fontSize:'14px',
           fontFamily:'Outfit',
           fontWeight:400
          }
        },
        labels: {
          style: {
           fontSize:'10px',
           fontFamily:'Outfit',
           fontWeight:400
          },
          formatter: function (value) {
            // Format the label with exponent and two decimal places
            return value.toExponential(2);
          },

        },
      },
      tooltip: {
        y: {
          formatter: function (value) {
            return value.toExponential(2);
          }
        }
      }
    };
  }



  eps() {
    const data1 = [38.74274986512196, 38.74274986512196, 38.74274986512197, 38.74274986512198, 38.74274986512198, 38.742749865121986, 38.79551396103972, 38.795513961039724, 38.795513961039724, 38.79551396103973, 38.79551396103974, 38.814969740768205, 38.81496974076821, 38.81496974076822, 38.814969740768234, 39.06564487194869, 39.06564487194869, 39.065644871948706, 39.06564487194871, 39.06564487194872, 39.06564487194873, 39.1179734348679, 39.11797343486792, 39.11797343486793, 39.11797343486794, 39.11797343486795, 39.13726891501956, 39.13726891501957, 39.13726891501957, 39.137268915019575, 39.153059191283454, 39.15305919128346, 39.15305919128346, 39.15305919128349, 39.176001372199494, 39.176001372199515, 39.17744244362748, 39.17744244362748, 39.17744244362748, 39.177442443627484, 39.17744244362749, 39.17744244362749, 39.17744244362749, 39.205271079613354, 39.20527107961336, 39.21074875139431, 39.21074875139432, 39.21074875139432, 39.21074875139432, 39.210748751394334, 39.210748751394334, 39.210748751394334, 39.210748751394334, 39.21074875139434, 39.21074875139434, 39.21074875139434, 39.21074875139435, 39.21074875139435, 39.21074875139435, 39.210748751394355, 39.224523615991686, 39.2245236159917, 39.2245236159917, 39.22452361599171, 39.224523615991714, 39.224523615991714, 39.22452361599172, 39.22452361599172, 39.22452361599172, 39.229621879563965, 39.229621879563986, 39.229621879563986, 39.22962187956399, 39.237688138158155, 39.247424022219874, 39.247424022219874, 39.247424022219896, 39.24886247127536, 39.248862471275366, 39.248862471275366, 39.24886247127539, 39.26867816598817, 39.26867816598819, 39.289787563910004, 39.30899870631023, 39.312389827137316, 39.312389827137316, 39.31238982713733, 39.31238982713733, 39.31238982713733, 39.31238982713734, 39.32073653040819, 39.32073653040819, 39.32073653040819, 39.32214163809208, 39.322141638092084, 39.32214163809209, 39.322141638092106, 39.322141638092106, 39.33993255928765, 39.339932559287654, 39.364390384084814, 39.364390384084814, 39.36439038408482, 39.36439038408483, 39.364390384084835, 39.364390384084835, 39.36439038408485, 39.37412931603688, 39.37412931603688, 39.374129316036885, 39.374129316036885, 39.37412931603689, 39.3741293160369, 39.377114572676966, 39.377114572676966, 39.37711457267697, 39.37711457267699, 39.383565135550555, 39.38356513555056, 39.393299327062195, 39.393299327062216, 39.39329932706222, 39.39329932706222, 39.404384772400206, 39.40438477240021, 39.40438477240021, 39.42902976817395, 39.429029768173955, 39.429029768173955, 39.42902976817397, 39.429029768173976, 39.42902976817399, 39.437604231999096, 39.43760423199911, 39.43760423199912, 39.44817310009519, 39.44817310009519, 39.44817310009519, 39.4481731000952, 39.448173100095204, 39.45626408672247, 39.456264086722484, 39.45626408672249, 39.4562640867225, 39.456264086722506, 39.47539421154284, 39.47539421154284, 39.47539421154285, 39.475394211542856, 39.475394211542856, 39.47539421154287, 39.47539421154287, 39.481924548004045, 39.48192454800405, 39.48943990422776, 39.50855396525083, 39.50855396525083, 39.50855396525083, 39.50855396525085, 39.50855396525085, 39.50855396525085, 39.508553965250854, 39.508553965250854, 39.508553965250854, 39.50855396525087, 39.50855396525087, 39.52729967944166, 39.52729967944167, 39.533702108506155, 39.533702108506155, 39.53370210850617, 39.533702108506176, 39.53370210850619, 39.54771300054482, 39.547713000544825, 39.547713000544825, 39.54771300054483, 39.547713000544846, 39.55069741520127, 39.550697415201284, 39.550697415201284, 39.550697415201284, 39.5506974152013, 39.5527947796313, 39.5527947796313, 39.552794779631306, 39.552794779631306, 39.55279477963131, 39.55279477963131, 39.55279477963132, 39.55279477963132, 39.57901787990967, 39.57901787990968, 39.57901787990969, 39.57901787990969, 39.5790178799097, 39.59808870152363, 39.598088701523636, 39.59808870152364, 39.59808870152364, 39.59808870152365, 39.59808870152365, 39.598088701523665, 39.598088701523665, 39.59940454051401, 39.599404540514016, 39.599404540514016, 39.59940454051402, 39.59940454051402, 39.59940454051403, 39.59940454051404, 39.60238505972372, 39.60238505972372, 39.60238505972374, 39.602385059723744, 39.60238505972375, 39.60238505972376, 39.6184655487666, 39.61846554876661, 39.61846554876662, 39.6214446341139, 39.62144463411391, 39.621444634113914, 39.621444634113914, 40.658907089107224, 40.65890708910724, 40.65890708910724, 40.658907089107245, 40.65890708910726, 40.671244441008206, 40.67124444100821, 40.67124444100822, 40.68307750069908, 40.68307750069909, 40.68307750069909, 40.72557708681204, 40.72557708681204, 40.725577086812045, 40.72557708681206, 40.732117697479616, 40.73211769747962, 40.73211769747963, 40.73211769747963, 40.73211769747964, 40.73211769747964, 40.73569350926352, 40.73569350926352, 40.73569350926354, 40.73569350926355, 40.73666229805883, 40.73666229805883, 40.73666229805884, 40.736662298058846, 40.744432881326475, 40.74443288132648, 40.74443288132648, 40.74443288132649, 40.74443288132649, 40.74443288132649, 40.7444328813265, 40.7444328813265, 40.7444328813265, 40.74443288132651, 40.74800761240041, 40.74800761240043, 40.75624469168579, 40.756244691685794, 40.7562446916858, 40.7562446916858, 40.75624469168581, 40.756244691685815, 40.756244691685815, 40.75981838683642, 40.75981838683642, 40.75981838683643, 40.75981838683644, 40.75981838683644, 40.77386306146177, 40.78039436995257, 40.78039436995258, 40.78039436995258, 40.78039436995259, 40.7803943699526, 40.798668060300045, 40.79866806030005, 40.79866806030005, 40.79866806030006, 40.79866806030006, 40.79866806030006, 40.798668060300066, 40.798668060300066, 40.79866806030007, 40.79866806030007, 40.80223803976773, 40.803474258100636, 40.803474258100636, 40.803474258100636, 40.80973341773707, 40.80973341773707, 40.80973341773707, 40.809733417737085, 40.809733417737085, 40.80973341773709, 40.8097334177371, 40.81330242930714, 40.81330242930715, 40.813302429307164, 40.813302429307164, 40.813703627808536, 40.813703627808536, 40.81370362780854, 40.81370362780855, 40.813703627808565, 40.813703627808565, 40.813703627808565, 40.81950828824837, 40.81950828824837, 40.81950828824838, 40.82647023730781, 40.82647023730782, 40.826470237307824, 40.82647023730783, 40.846867632604486, 40.8468676326045, 40.8468676326045, 40.8468676326045, 40.84686763260451, 40.84686763260451, 40.84686763260451, 40.846867632604514, 40.846867632604514, 40.84686763260452, 40.85043339984087, 40.85043339984087, 40.850433399840874, 40.850433399840895, 40.85338726971776, 40.85338726971776, 40.85338726971777, 40.85338726971778, 40.85338726971778, 40.853387269717786, 40.85695246795653, 40.85695246795655, 40.85695246795656, 40.85695246795656, 40.87642594420601, 40.87642594420601, 40.87642594420602, 40.87642594420603, 40.876425944206034, 40.876425944206034, 40.876425944206034, 40.876425944206034, 40.87642594420605, 40.87998913321138, 40.8799891332114, 40.87998913321141, 40.886637062239174, 40.886637062239195, 40.886637062239195, 40.890199361443464, 40.89019936144347, 40.89019936144347, 40.890199361443486, 40.890199361443486, 40.892431369815306, 40.89243136981531, 40.89243136981531, 40.89243136981532, 40.89243136981533, 40.892431369815334, 40.89599316429883, 40.89599316429884, 40.895993164298844, 40.89599316429885, 40.89599316429886, 40.895993164298865, 40.899380905809046, 40.89938090580906, 40.89938090580907, 40.89938090580907, 40.899380905809075, 40.899380905809075, 40.89938090580908, 40.89938090580909, 40.901527291588934, 40.90152729158895, 40.90294209513273, 40.90294209513274, 40.90294209513276, 40.92130681232444, 40.92130681232444, 40.921306812324445, 40.92130681232447, 40.927597473069255, 40.92759747306926, 40.92759747306926, 40.92759747306927, 40.92759747306928, 40.927597473069284, 40.927597473069284, 40.927597473069284, 40.94783666424809, 40.94783666424809, 40.9478366642481, 40.9478366642481, 40.94783666424812, 40.94783666424812, 40.95823075185971, 40.958230751859716, 40.958230751859716, 40.960933325632205, 40.960933325632205, 40.96223211747833, 40.96223211747834, 40.962232117478344, 40.97430440196967, 40.974304401969675, 40.974304401969675, 40.97430440196968, 40.97430440196968, 40.97430440196969, 40.97430440196969, 40.974304401969704, 40.974304401969704, 40.974304401969704, 40.97785908005192, 40.97785908005193, 40.977859080051935, 40.98510576994104, 40.985105769941065, 40.98767264420588, 40.98767264420589, 40.987672644205894, 40.987672644205894, 40.99404880795587, 40.994048807955885, 40.99404880795589, 40.9940488079559, 40.9940488079559, 40.994048807955906, 40.99760177410857, 40.997601774108574, 40.99760177410858, 40.99760177410859, 40.997601774108595, 40.997607859696465, 40.997607859696465, 40.99760785969648, 40.99760785969648, 40.99760785969649, 40.99760785969649, 40.997607859696494, 41.00015585404659, 41.00015585404661, 41.00015585404662, 41.00032830793264, 41.000328307932655, 41.000328307932655, 41.00032830793266, 41.00032830793266, 41.00032830793267, 41.00044798988509, 41.000447989885096, 41.00044798988512, 41.003880729969765, 41.02053161433452, 41.02053161433454, 41.020531614334544, 41.020531614334544, 41.020531614334544, 41.02053161433455, 41.02053161433455, 41.0240822868951, 41.02408228689513, 41.02524091640219, 41.02524091640219, 41.0252409164022, 41.030907286620675, 41.030907286620696, 41.030907286620696, 41.0309072866207, 41.03090728662071, 41.033605073738805, 41.033605073738805, 41.03360507373881, 41.03360507373881, 41.03360507373881, 41.03360507373881, 41.03360507373881, 41.03360507373882, 41.03360507373883, 41.03360507373883, 41.03360507373883, 41.03445706138421, 41.03445706138422, 41.03445706138422, 41.034457061384224, 41.03445706138423, 41.03445706138423, 41.03445706138424, 41.03490156545828, 41.03490156545828, 41.034901565458284, 41.034901565458284, 41.03490156545829, 41.0349015654583, 41.0349015654583, 41.034901565458306, 41.034901565458306, 41.034901565458306, 41.03715461513976, 41.03715461513977, 41.038159978075974, 41.038159978075974, 41.03815997807598, 41.03815997807599, 41.03815997807599, 41.03845099472167, 41.03845099472168, 41.04364407521263, 41.04364407521263, 41.04364407521265, 41.05773473310396, 41.05773473310396, 41.05773473310396, 41.05773473310397, 41.05773473310398, 41.05773473310398, 41.05773473310398, 41.057734733103985, 41.058539147952, 41.058539147952004, 41.05853914795201, 41.05853914795203, 41.06029706698747, 41.060297066987474, 41.060297066987474, 41.060297066987474, 41.06029706698748, 41.06029706698749, 41.06029706698749, 41.0602970669875, 41.06128218861722, 41.061282188617234, 41.061282188617234, 41.06128218861724, 41.06128218861725, 41.063844301143824, 41.06384430114383, 41.063844301143845, 41.068144601447244, 41.068144601447244, 41.07021471404945, 41.070214714049456, 41.070214714049456, 41.07021471404946, 41.07021471404946, 41.07021471404947, 41.07021471404948, 41.070349593570086, 41.070349593570086, 41.0703495935701, 41.072758204152656, 41.07275820415266, 41.07275820415266, 41.07275820415266, 41.07275820415267, 41.07275820415267, 41.07275820415267, 41.07275820415267, 41.07275820415267, 41.07304982360027, 41.07304982360028, 41.073049823600286, 41.073049823600286, 41.07304982360029, 41.0730498236003, 41.07376109169267, 41.074565455829195, 41.07456545582922, 41.07630436220025, 41.07630436220026, 41.076304362200275, 41.07645436977746, 41.07645436977746, 41.07645436977746, 41.07645436977747, 41.07645436977748, 41.07645436977749, 41.07645436977749, 41.076595956472254, 41.076595956472254, 41.076595956472254, 41.07659595647227, 41.076595956472275, 41.076595956472275, 41.097798951884464, 41.09779895188448, 41.09779895188448, 41.097798951884485, 41.097798951884485, 41.097798951884485, 41.097798951884485, 41.09779895188449, 41.0977989518845, 41.10122563292927, 41.10122563292927, 41.10122563292928, 41.101225632929285, 41.10122563292929, 41.1012256329293, 41.10134294945651, 41.101342949456516, 41.101342949456544, 41.10208087040927, 41.102689323124295, 41.102689323124295, 41.10268932312431, 41.11069521215659, 41.1106952121566, 41.1106952121566, 41.11069521215661, 41.11069521215661, 41.110695212156614, 41.114238098086616, 41.11423809808662, 41.11423809808664, 41.11423809808664, 41.11439417251961, 41.11439417251962, 41.11439417251963, 41.11439417251964, 41.11616963450529, 41.11616963450529, 41.1161696345053, 41.1161696345053, 41.116169634505304, 41.11616963450531, 41.11616963450532, 41.11616963450532, 41.11971204875754, 41.11971204875756, 41.11971204875756, 41.11971204875758, 41.13103844306128, 41.13103844306128, 41.13103844306128, 41.13103844306129, 41.13103844306129, 41.13103844306129, 41.13103844306129, 41.13103844306131, 41.133269446889585, 41.13326944688959, 41.13326944688959, 41.13326944688959, 41.13326944688961, 41.13326944688961, 41.133269446889614, 41.133269446889614, 41.134579576846384, 41.13457957684639, 41.1345795768464, 41.14062696953046, 41.14062696953046, 41.14062696953047, 41.14062696953048, 41.14062696953048, 41.14062696953048, 41.14062696953048, 41.14062696953048, 41.14062696953048, 41.140626969530494, 41.140626969530494, 41.140626969530494, 41.141638716135226, 41.14163871613523, 41.14163871613524, 41.14163871613525, 41.14163871613526, 41.14282807706271, 41.14282807706271, 41.14282807706271, 41.14282807706271, 41.14282807706272, 41.142828077062724, 41.142828077062724, 41.14282807706273, 41.14416727806483, 41.14636819620975, 41.14636819620977, 41.14636819620978, 41.146368196209785, 41.14703651328823, 41.147036513288235, 41.147036513288235, 41.14703651328825, 41.14703651328825, 41.147036513288256, 41.147036513288256, 41.147036513288256, 41.14703651328826, 41.148922100500855, 41.14892210050086, 41.14892210050087, 41.148922100500876, 41.14892210050088, 41.14892210050089, 41.15057627039016, 41.15057627039016, 41.150576270390175, 41.150576270390175, 41.152461695412704, 41.152461695412725, 41.15697293720605, 41.15697293720605, 41.15697293720605, 41.156972937206056, 41.156972937206056, 41.15697293720606, 41.15697293720606, 41.15697293720606, 41.15697293720606, 41.15697293720606, 41.15697293720607, 41.156972937206085, 41.15924466772655, 41.159244667726554, 41.15924466772656, 41.15924466772657, 41.159244667726576, 41.160511839786864, 41.160511839786864, 41.16051183978687, 41.17364976498489, 41.173649764984894, 41.1736497649849, 41.1736497649849, 41.1736497649849, 41.1736497649849, 41.17450349813994, 41.174503498139956, 41.17450349813996, 41.17450349813997, 41.17511088065159, 41.1751108806516, 41.1751108806516, 41.17511088065161, 41.175110880651616, 41.175110880651616, 41.175110880651616, 41.17511088065162, 41.17718723430442, 41.177187234304434, 41.17718723430444, 41.17804089411807, 41.17804089411808, 41.178040894118084, 41.178040894118084, 41.178040894118084, 41.17804089411809, 41.1780408941181, 41.1780408941181, 41.178040894118105, 41.178040894118105, 41.178648224453354, 41.17864822445337, 41.17864822445338, 41.17864822445338, 41.1867951486152, 41.186795148615204, 41.18679514861521, 41.186795148615225, 41.190331488995255, 41.190331488995255, 41.19033148899526, 41.19033148899528, 41.19033148899528, 41.190331488995284, 41.190331488995284, 41.190930156498204, 41.190930156498204, 41.19093015649822, 41.20254047550232, 41.202540475502325, 41.20254047550233, 41.20316757566592, 41.20316757566593, 41.20563725791774, 41.20563725791775, 41.20563725791776, 41.20563725791776, 41.205637257917765, 41.20917198137352, 41.209171981373544, 41.21399183153307, 41.21399183153308, 41.213991831533086, 41.213991831533086, 41.21399183153309, 41.21399183153309, 41.21399183153309, 41.21399183153311, 41.21752583851921, 41.21752583851922, 41.22502509668264, 41.22502509668265, 41.22502509668265, 41.22502509668266, 41.225025096682664, 41.22502509668267, 41.22502509668267, 41.227986771855406, 41.22798677185541, 41.22798677185542, 41.22798677185542, 41.22798677185544, 41.231566888228414, 41.23156688822842, 41.231566888228436, 41.231566888228436, 41.23156688822844, 41.23156688822844, 41.23156688822845, 41.232790425508625, 41.23279042550864, 41.23279042550865, 41.23279042550865, 41.23279042550865, 41.234199564158914, 41.234199564158914, 41.23509938896444, 41.23509938896446, 41.235099388964464, 41.240687772085316, 41.240687772085316, 41.240687772085316, 41.24068777208532, 41.24068777208534, 41.24068777208534, 41.25137645532638, 41.251376455326394, 41.2513764553264, 41.25137645532641, 41.251376455326415, 41.252003865609744, 41.25200386560975, 41.25879402899881, 41.25879402899881, 41.25879402899881, 41.25879402899883, 41.25879402899883, 41.26319684171587, 41.26319684171587, 41.26319684171587, 41.263196841715875, 41.26319684171589, 41.26319684171589, 41.263196841715896, 41.263196841715896, 41.2631968417159, 41.2631968417159, 41.2631968417159, 41.26672663487514, 41.27478683259412, 41.274786832594124, 41.274786832594124, 41.274786832594124, 41.27478683259413, 41.274786832594145, 41.274786832594145, 41.275412835113904, 41.27541283511391, 41.27541283511391, 41.27541283511392, 41.27541283511392, 41.27541283511392, 41.275412835113926, 41.275412835113926, 41.27831563466958, 41.27831563466959, 41.2783156346696, 41.2783156346696, 41.2783156346696, 41.27894158367444, 41.27894158367446, 41.27894158367446, 41.278941583674474, 41.278941583674474, 41.29040268949037, 41.29040268949038, 41.290402689490385, 41.29076675991288, 41.290766759912884, 41.290766759912884, 41.29076675991289, 41.2907667599129, 41.2907667599129, 41.297232118663736, 41.297232118663736, 41.29723211866374, 41.29723211866375, 41.29723211866375, 41.29723211866375, 41.30018861580371, 41.30018861580372, 41.30018861580373, 41.30018861580373, 41.300188615803734, 41.30018861580374, 41.300759002978566, 41.30075900297857, 41.30371524766611, 41.30371524766611, 41.30371524766611, 41.303715247666126, 41.30498387258604, 41.30498387258605, 41.30498387258605, 41.30498387258606, 41.30498387258606, 41.30498387258606, 41.30498387258607, 41.30572358018656, 41.305723580186566, 41.30572358018657, 41.30572358018659, 41.3063905484074, 41.30639054840741, 41.30639054840741, 41.306390548407414, 41.30639054840742, 41.30639054840743, 41.30639054840743, 41.30639054840743, 41.30639054840743, 41.308510095062935, 41.30851009506294, 41.30851009506294, 41.30931025520193, 41.30931025520194, 41.30931025520196, 41.30931025520196, 41.30931025520196, 41.309916650810166, 41.30991665081018, 41.30991665081019, 41.309916650810194, 41.31286741870267, 41.312867418702695, 41.312867418702695, 41.3128674187027, 41.31491608162942, 41.31491608162942, 41.31491608162943, 41.31491608162943, 41.314916081629434, 41.31491608162944, 41.31491608162945, 41.31526658165561, 41.31526658165563, 41.31639296834402, 41.31639296834402, 41.316392968344026, 41.316392968344026, 41.31639296834403, 41.323537432070516, 41.32353743207053, 41.32353743207053, 41.32353743207054, 41.323537432070545, 41.323537432070545, 41.32416374675909, 41.3241637467591, 41.3241637467591, 41.3241637467591, 41.324163746759105, 41.32416374675911, 41.32416374675911, 41.32416374675912, 41.32706207146906, 41.327062071469065, 41.32706207146908, 41.32706207146908, 41.327688332742255, 41.32768833274226, 41.327688332742284, 41.327688332742284, 41.32768833274229, 41.33094205517248, 41.33094205517248, 41.33094205517248, 41.33094205517249, 41.3309420551725, 41.334466063169934, 41.33446606316995, 41.334466063169955, 41.334466063169955, 41.33446606316997, 41.33738413368866, 41.33738413368866, 41.33738413368867, 41.34190455004208, 41.34190455004209, 41.35354228110721, 41.35354228110722, 41.35354228110724, 41.3567363945088, 41.35673639450881, 41.35673639450881, 41.35673639450881, 41.356736394508815, 41.35673639450882, 41.35790576521535, 41.357905765215364, 41.357905765215364, 41.35790576521537, 41.36249558115359, 41.362495581153595, 41.362495581153595, 41.3624955811536, 41.3624955811536, 41.3624955811536, 41.36249558115362, 41.362859017024, 41.362859017024, 41.362859017024, 41.362859017024014, 41.362859017024014, 41.362859017024014, 41.36285901702402, 41.36285901702403, 41.36601690107802, 41.366016901078034, 41.366016901078034, 41.366016901078034, 41.36601690107805, 41.366081829923324, 41.36608182992333, 41.36608182992333, 41.3663803060109, 41.367001412656165, 41.36700141265618, 41.367001412656194, 41.367669289606305, 41.367669289606305, 41.36766928960632, 41.367669289606326, 41.36766928960633, 41.37108556485301, 41.371085564853026, 41.371085564853026, 41.37108556485303, 41.37108556485303, 41.37747340992599, 41.377473409926, 41.377473409926, 41.377473409926, 41.377473409926004, 41.37778977813409, 41.377789778134094, 41.3777897781341, 41.3777897781341, 41.37778977813411, 41.377789778134115, 41.38130979660721, 41.381309796607226, 41.381309796607226, 41.38130979660723, 41.38130979660724, 41.381370206908436, 41.381370206908436, 41.38137020690844, 41.38137020690844, 41.38137020690845, 41.38137020690845, 41.38137020690845, 41.38137020690845, 41.384889920845886, 41.38488992084589, 41.38696627288304, 41.38696627288305, 41.38696627288306, 41.38696627288306, 41.386966272883065, 41.386966272883065, 41.3873161627321, 41.387316162732105, 41.387316162732105, 41.38731616273211, 41.38731616273211, 41.38731616273212, 41.38731616273212, 41.39048551094904, 41.390485510949055, 41.390835371048844, 41.390835371048844, 41.390835371048844, 41.390835371048844, 41.39083537104885, 41.390835371048865, 41.409395231720204, 41.409395231720204, 41.40939523172021, 41.40939523172021, 41.40939523172021, 41.40939523172022, 41.40939523172022, 41.40939523172022, 41.40939523172023, 41.40939523172023, 41.41291256379022, 41.41291256379024, 41.413907787909466, 41.413907787909466, 41.41390778790947, 41.41390778790948, 41.41390778790948, 41.41390778790948, 41.41390778790949, 41.41390778790949, 41.413907787909494, 41.413907787909494, 41.413907787909494, 41.41742473675531, 41.41742473675532, 41.425525291008675, 41.425525291008675, 41.425525291008675, 41.42552529100868, 41.42552529100869, 41.42552529100869, 41.42552529100869, 41.4255252910087, 41.425525291008704, 41.42685353064982, 41.42685353064982, 41.42685353064983, 41.426853530649836, 41.426853530649836, 41.42871385459083, 41.42871385459084, 41.42871385459084, 41.428713854590846, 41.428713854590846, 41.42871385459085, 41.42871385459086, 41.42871385459086, 41.42904125363416, 41.42904125363419, 41.42904125363419, 41.42988119371224, 41.42988119371225, 41.429881193712255, 41.429881193712255, 41.42988119371226, 41.42988119371226, 41.42988119371227, 41.43004337866672, 41.43004337866673, 41.43004337866674, 41.430457663311024, 41.43045766331103, 41.43045766331103, 41.43045766331104, 41.430705401204044, 41.430705401204044, 41.43070540120405, 41.430705401204065, 41.430705401204065, 41.43070540120408, 41.43222954663302, 41.43339678670376, 41.43339678670377, 41.43339678670379, 41.43339678670379, 41.4380430570821, 41.4380430570821, 41.4380430570821, 41.43804305708211, 41.43804305708211, 41.43804305708211, 41.438043057082126, 41.438961042904715, 41.43896104290472, 41.43896104290473, 41.43896104290474, 41.43896104290474, 41.43896104290474, 41.438961042904744, 41.438961042904744, 41.43896104290475, 41.43896104290475, 41.439627760091106, 41.43962776009111, 41.43962776009111, 41.43962776009111, 41.43962776009112, 41.43962776009112, 41.439627760091135, 41.439627760091135, 41.441557957681944, 41.44155795768196, 41.44155795768196, 41.44155795768197, 41.44155795768197, 41.44247586564656, 41.44247586564658, 41.44303810358342, 41.44303810358342, 41.44303810358343, 41.44303810358343, 41.44303810358344, 41.44303810358345, 41.44303810358345, 41.44303810358345, 41.44314252628819, 41.443142526288206, 41.44655258057526, 41.446552580575265, 41.44941485992063, 41.44941485992063, 41.44941485992064, 41.449414859920644, 41.44941485992066, 41.44941485992066, 41.45292879627603, 41.45292879627605, 41.45292879627605, 41.45292879627607, 41.46606788759696, 41.46606788759697, 41.46606788759697, 41.46606788759698, 41.46606788759698, 41.46687436815997, 41.466874368159985, 41.466874368159985, 41.46687436815999, 41.48621375298895, 41.48621375298896, 41.490298902293574, 41.490298902293596, 41.49029890229361, 41.49870937620339, 41.498709376203394, 41.4987093762034, 41.49870937620341, 41.501893701358775, 41.50189370135878, 41.50189370135878, 41.50189370135879, 41.501893701358796, 41.501893701358796, 41.501893701358796, 41.5018937013588, 41.50189370135881, 41.50221913885946, 41.50221913885946, 41.502219138859466, 41.50221913885947, 41.50221913885949, 41.50221913885949, 41.50230726877826, 41.50230726877827, 41.502307268778274, 41.502307268778274, 41.50230726877829, 41.50230726877829, 41.50255457778517, 41.502554577785176, 41.502554577785176, 41.50255457778519, 41.50255457778519, 41.5025545777852, 41.504572799885075, 41.50457279988508, 41.50457279988509, 41.50540319474327, 41.50540319474329, 41.505403194743295, 41.50581672719388, 41.505816727193896, 41.5058167271939, 41.5058167271939, 41.50581672719391, 41.506064015290086, 41.5060640152901, 41.50606401529011, 41.52107725814195, 41.52107725814197, 41.52107725814197, 41.53785589675371, 41.53785589675371, 41.53785589675372, 41.537855896753726, 41.537855896753726, 41.537855896753726, 41.53866098353966, 41.53866098353966, 41.538660983539664, 41.538660983539664, 41.53866098353967, 41.53866098353967, 41.53866098353968, 41.53866098353968, 41.53866098353968, 41.53866098353969, 41.54136235198359, 41.541362351983594, 41.541362351983594, 41.541362351983615, 41.54216737081449, 41.557966961815715, 41.557966961815715, 41.55796696181572, 41.55796696181573, 41.55796696181573, 41.55796696181574, 41.557966961815744, 41.557966961815744, 41.557966961815744, 41.557966961815744, 41.557966961815744, 41.56147172031675, 41.56147172031676, 41.56204505847063, 41.56204505847063, 41.56204505847063, 41.56204505847064, 41.56204505847064, 41.562045058470645, 41.562045058470645, 41.565549473111304, 41.56554947311131, 41.56554947311131, 41.56554947311132, 41.565549473111325, 41.57629432430982, 41.57629432430983, 41.57629432430985, 41.57629432430985, 41.57629432430985, 41.576294324309856, 41.57629432430986, 41.57979753799866, 41.57979753799867, 41.57979753799867, 41.57979753799868, 41.579797537998694, 41.582603828350805, 41.58260382835081, 41.582603828350834, 41.5837623377905, 41.5837623377905, 41.58376233779051, 41.58376233779053, 41.58376233779053, 41.587618728730156, 41.587618728730156, 41.58761872873017, 41.58761872873017, 41.58761872873017, 41.59277032270476, 41.592770322704766, 41.592770322704766, 41.59277032270477, 41.59277032270477, 41.59277032270477, 41.59277032270478, 41.59277032270479, 41.59277032270479, 41.59627214879469, 41.596272148794704, 41.596272148794704, 41.60920396923192, 41.60920396923192, 41.609203969231935, 41.60920396923194, 41.65289397238955, 41.65328785794905, 41.65328785794906, 41.65328785794906, 41.653287857949074, 41.653287857949074, 41.65419099666027, 41.65419099666027, 41.65419099666027, 41.65419099666027, 41.654190996660276, 41.654190996660276, 41.65419099666028, 41.65419099666028, 41.65419099666029, 41.6541909966603, 41.65534751513331, 41.65534751513331, 41.655347515133315, 41.65534751513332, 41.65534751513332, 41.65534751513332, 41.655347515133336, 41.657687659609444, 41.657687659609444, 41.65884408100932, 41.65884408100933, 41.658844081009335, 41.65919727943525, 41.659197279435254, 41.65919727943526, 41.65919727943526, 41.65919727943526, 41.659197279435276, 41.659197279435276, 41.659197279435276, 41.662693522217545, 41.66269352221756, 41.68074545151301, 41.68074545151301, 41.68074545151302, 41.68074545151302, 41.68074545151302, 41.68074545151303, 41.68074545151303, 41.68074545151303, 41.68423988695423, 41.68423988695423, 41.68423988695424, 41.69125496892108, 41.691254968921086, 41.69125496892111, 41.69422334362356, 41.69422334362357, 41.69422334362357, 41.69422334362358, 41.69422334362358, 41.694223343623584, 41.69422334362359, 41.72436054292265, 41.72436054292265, 41.72436054292265, 41.72436054292267, 41.72436054292267, 41.72436054292267, 41.724360542922675, 41.724753753831116, 41.72475375383112, 41.72475375383112, 41.72475375383112, 41.72475375383113, 41.72475375383114, 41.72785132588452, 41.72785132588453, 41.72785132588453, 41.72785132588453, 41.727851325884544, 41.72785132588455, 41.72785132588455, 41.728244503898864, 41.72824450389888, 41.72824450389889, 41.72824450389889, 41.76265589404324, 41.76265589404324, 41.76265589404324, 41.76265589404325, 41.76265589404326, 41.76265589404326, 41.76265589404326, 41.76550304772548, 41.76550304772548, 41.7655030477255, 41.765619194124746, 41.76561919412475, 41.76561919412475, 41.76561919412476, 41.76561919412477, 41.765619194124774, 41.7661434763085, 41.7661434763085, 41.766143476308514, 41.76614347630852, 41.76614347630852, 41.76910652896426, 41.76910652896427, 41.83677725722002, 41.83677725722003, 41.836777257220035, 41.83677725722005, 41.83677725722005, 41.83677725722006, 41.83677725722006, 41.836777257220064, 41.84025866112165, 41.84025866112166, 41.840258661121666, 41.84025866112167]
     const data = data1.filter((value)=> value !==undefined)
    data.sort((a,b)=>a-b);
    // Create an empty array to hold the labels for the x-axis
    const labels = [];
    // Loop through the data and add a label for every 30th value
   for (let i = 0; i < data.length; i++) {
    if (i % 200 === 0) {
      labels.push(i.toString());
    } else {
      labels.push('');
    }
  }  
    this.chartOptions1 = {
      series: [
        {
          name: "",
          data: data
        }
      ],
      chart: {
        height: 190,
        width: 250,
        type: "line",
        zoom: {
          enabled: false
        }
      },
     
      dataLabels: {
        enabled: false
      },
      stroke: {
        curve: "straight"
      },
      title: {
        text: "EPS Graph",
        align: "left",
        style: {
          color: '#222',
         fontSize:'14px',
         fontFamily:'Outfit',
         fontWeight:500,
        }
      },
      grid: {
        row: {
          colors: ["#f3f3f3", "transparent"],
          opacity: 0.5
        }
      },
      xaxis: {
        categories: labels,
        title: {
          text: "Number of Clusters",
          style: {
            color: '#666',
           fontSize:'14px',
           fontFamily:'Outfit',
           fontWeight:400
          }
        },
        labels:{
          style: {
            fontSize:'10px',
            fontFamily:'Outfit',
            fontWeight:400
           },
          }
      },
      yaxis: {
        title: {
          text: "eps",
          style: {
            color: '#666',
           fontSize:'14px',
           fontFamily:'Outfit',
           fontWeight:400
          }
        },
        labels: {
          style: {
            fontSize:'10px',
            fontFamily:'Outfit',
            fontWeight:400
           },
          formatter: function (value) {
            // Format the label with exponent and two decimal places
            return value.toExponential(2);
          },
        },
      },
      tooltip: {
        y: {
          formatter: function (value) {
            return value.toExponential(2);
          }
        }
      }
    };
  }
  
  createDendrogram(): void {
    const data: MyNodeData = {
      name: 'Root',
      children: [
        { name: '3' },
        {
          name: '5',
          children: [
            { name: '2' },
            {
              name: '4',
              children: [
                { name: '0' },
                { name: '1' }
              ]
            }
          ]
        }
      ]
    };

    const width = 300; // Adjust the width as needed
    const height = 155; // Adjust the height as needed

    const svg = d3.select('#dendrogram')
  .append('svg')
  .attr('width', width)
  .attr('height', height + 5); // Increase the height to provide space for the complete circles

    const tree = d3.tree<MyNodeData>()
      .size([width - 100, height]) // Swap width and height for vertical layout

    const root = d3.hierarchy<MyNodeData>(data);
    const treeData = tree(root);

    const link = svg.selectAll('path')
      .data(treeData.links())
      .enter()
      .append('path')
      .attr('d', d => {
        return 'M' + d.source.x + ',' + d.source.y + // Swap x and y
          'H' + d.target.x + // Use horizontal line to connect nodes
          'V' + d.target.y; // Vertical line to target node
      })
      .attr('fill', 'none')
      .attr('stroke', '#ccc');

      const node = svg.selectAll('g')
      .data(treeData.descendants())
      .enter()
      .append('g')
      .attr('transform', d => 'translate(' + d.x + ',' + d.y + ')');
      

      node.append('circle')
      .attr('r', (d)=>d.parent ? 5:0)
      .attr('fill', 'steelblue');

    node.append('text')
      .attr('dy', 3)
      .attr('y', -8) // Adjust the positioning of the text
      .attr('text-anchor', 'middle')
      .text(d => d.data.name);
  }
  
  private captureScreen() {
    const element = this.el.nativeElement;
    this.gs.captureScreen(element);
  }
}
